<?php

use App\Http\Controllers\AuthController;
use App\Http\Controllers\SolicitudController;
use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/


Route::get('generate-pdf', [SolicitudController::class, 'generatePDF']);
Route::get('vistapdf', function () {
    $data = '{"solicitud":{"solicitud_codigo":"SO-2366072709","solicitud_nombre":"MATERIALES PARA LA CONSTRUCCI\u00d3N","solicitud_descripcion":"DESCRIPCI\u00d3N","solicitud_nombre_solicitante":"JEFE DE PROYECTO","solicitud_estado_id":1,"solicitud_detalle_solicitud_id":7,"solicitud_tipo_solicitud_id":1,"id":10},"pdf":"http:\/\/localhost:8000\/solicitudes\/Solicitud-2021-01-17-21-13-45.pdf","carro":{"estado":{"id":1,"estado":"SOLICITUD_ACTIVA","estado_descripcion":"CREADA"},"solicitud_tipo":{"id":1,"ts_nombre":"CLIENTE","ts_descripcion":"Los materiales solicitados solo se asignar\u00e1n para el cliente seleccionado."},"datos_tipo_solicitud":{"cliente":{"id":14,"cliente_rut":1782222,"cliente_dv":"2","cliente_nombre":"CLEINTE2","cliente_apellido_paterno":"CLIENTE2","cliente_apellido_materno":"CLIENTE2","cliente_telefono":"+5656565","cliente_direccion":"ASDASD","cliente_genero":"MASCULINO","cliente_proyecto_id":3,"cliente_estado_id":10},"proyecto":{"id":3,"proyecto_nombre":"PADRE HURTADO","proyecto_direccion":"PADRE HURTADO","proyecto_descripcion":"POBLACI\u00d3N","proyecto_telefono_ad":"+59 465465","proyecto_centro_costo_id":16,"proyecto_estado_id":8},"centro_costo":{"id":16,"cc_nombre":"ZONA NORTE","cc_direccion":"DESDE PIO NONO HASTA LOLO","cc_estado_id":12},"detalle_solicitud":{"id":7,"ds_centro_costo_id":16,"ds_proyecto_id":3,"ds_cliente_id":14}},"datos_catalogo":[{"id":30,"sc_cantidad":"12","sc_solicitud_id":10,"sc_catalogo_id":249,"catalogo":{"id":249,"catalogo_material":"MATERIAL-1015","catalogo_descripcion":"DESCRIPCI\u00d3N-3941","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":31,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":201,"catalogo":{"id":201,"catalogo_material":"MATERIAL-1114","catalogo_descripcion":"DESCRIPCI\u00d3N-2822","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":32,"sc_cantidad":"3","sc_solicitud_id":10,"sc_catalogo_id":35,"catalogo":{"id":35,"catalogo_material":"MATERIAL-1171","catalogo_descripcion":"DESCRIPCI\u00d3N-2204","catalogo_unidad_id":2,"unidad":{"id":2,"unidad_nombre":"METRO","unidad_descripcion":"Medici\u00f3n del producto por metros."}}},{"id":33,"sc_cantidad":"5","sc_solicitud_id":10,"sc_catalogo_id":184,"catalogo":{"id":184,"catalogo_material":"MATERIAL-1140","catalogo_descripcion":"DESCRIPCI\u00d3N-2995","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":34,"sc_cantidad":"1","sc_solicitud_id":10,"sc_catalogo_id":108,"catalogo":{"id":108,"catalogo_material":"MATERIAL-1215","catalogo_descripcion":"DESCRIPCI\u00d3N-3491","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":35,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":29,"catalogo":{"id":29,"catalogo_material":"MATERIAL-1465","catalogo_descripcion":"DESCRIPCI\u00d3N-3610","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":36,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":285,"catalogo":{"id":285,"catalogo_material":"MATERIAL-1768","catalogo_descripcion":"DESCRIPCI\u00d3N-3583","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":37,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":256,"catalogo":{"id":256,"catalogo_material":"MATERIAL-2031","catalogo_descripcion":"DESCRIPCI\u00d3N-3054","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":38,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":40,"catalogo":{"id":40,"catalogo_material":"MATERIAL-2287","catalogo_descripcion":"DESCRIPCI\u00d3N-1778","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":39,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":121,"catalogo":{"id":121,"catalogo_material":"MATERIAL-3179","catalogo_descripcion":"DESCRIPCI\u00d3N-2886","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}}],"solicitud":{"solicitud_codigo":"SO-2366072709","solicitud_nombre":"MATERIALES PARA LA CONSTRUCCI\u00d3N","solicitud_descripcion":"DESCRIPCI\u00d3N","solicitud_nombre_solicitante":"JEFE DE PROYECTO","solicitud_estado_id":1,"solicitud_detalle_solicitud_id":7,"solicitud_tipo_solicitud_id":1,"id":10},"fecha":"2021-01-17-21-13-45"}}';
    $data = json_decode($data, true);
    return view('preview')->with('data', $data);
});
Route::get('json', function () {
    $data = '{"solicitud":{"solicitud_codigo":"SO-2366072709","solicitud_nombre":"MATERIALES PARA LA CONSTRUCCI\u00d3N","solicitud_descripcion":"DESCRIPCI\u00d3N","solicitud_nombre_solicitante":"JEFE DE PROYECTO","solicitud_estado_id":1,"solicitud_detalle_solicitud_id":7,"solicitud_tipo_solicitud_id":1,"id":10},"pdf":"http:\/\/localhost:8000\/solicitudes\/Solicitud-2021-01-17-21-13-45.pdf","carro":{"estado":{"id":1,"estado":"SOLICITUD_ACTIVA","estado_descripcion":"CREADA"},"solicitud_tipo":{"id":1,"ts_nombre":"CLIENTE","ts_descripcion":"Los materiales solicitados solo se asignar\u00e1n para el cliente seleccionado."},"datos_tipo_solicitud":{"cliente":{"id":14,"cliente_rut":1782222,"cliente_dv":"2","cliente_nombre":"CLEINTE2","cliente_apellido_paterno":"CLIENTE2","cliente_apellido_materno":"CLIENTE2","cliente_telefono":"+5656565","cliente_direccion":"ASDASD","cliente_genero":"MASCULINO","cliente_proyecto_id":3,"cliente_estado_id":10},"proyecto":{"id":3,"proyecto_nombre":"PADRE HURTADO","proyecto_direccion":"PADRE HURTADO","proyecto_descripcion":"POBLACI\u00d3N","proyecto_telefono_ad":"+59 465465","proyecto_centro_costo_id":16,"proyecto_estado_id":8},"centro_costo":{"id":16,"cc_nombre":"ZONA NORTE","cc_direccion":"DESDE PIO NONO HASTA LOLO","cc_estado_id":12},"detalle_solicitud":{"id":7,"ds_centro_costo_id":16,"ds_proyecto_id":3,"ds_cliente_id":14}},"datos_catalogo":[{"id":30,"sc_cantidad":"12","sc_solicitud_id":10,"sc_catalogo_id":249,"catalogo":{"id":249,"catalogo_material":"MATERIAL-1015","catalogo_descripcion":"DESCRIPCI\u00d3N-3941","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":31,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":201,"catalogo":{"id":201,"catalogo_material":"MATERIAL-1114","catalogo_descripcion":"DESCRIPCI\u00d3N-2822","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":32,"sc_cantidad":"3","sc_solicitud_id":10,"sc_catalogo_id":35,"catalogo":{"id":35,"catalogo_material":"MATERIAL-1171","catalogo_descripcion":"DESCRIPCI\u00d3N-2204","catalogo_unidad_id":2,"unidad":{"id":2,"unidad_nombre":"METRO","unidad_descripcion":"Medici\u00f3n del producto por metros."}}},{"id":33,"sc_cantidad":"5","sc_solicitud_id":10,"sc_catalogo_id":184,"catalogo":{"id":184,"catalogo_material":"MATERIAL-1140","catalogo_descripcion":"DESCRIPCI\u00d3N-2995","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":34,"sc_cantidad":"1","sc_solicitud_id":10,"sc_catalogo_id":108,"catalogo":{"id":108,"catalogo_material":"MATERIAL-1215","catalogo_descripcion":"DESCRIPCI\u00d3N-3491","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":35,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":29,"catalogo":{"id":29,"catalogo_material":"MATERIAL-1465","catalogo_descripcion":"DESCRIPCI\u00d3N-3610","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":36,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":285,"catalogo":{"id":285,"catalogo_material":"MATERIAL-1768","catalogo_descripcion":"DESCRIPCI\u00d3N-3583","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":37,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":256,"catalogo":{"id":256,"catalogo_material":"MATERIAL-2031","catalogo_descripcion":"DESCRIPCI\u00d3N-3054","catalogo_unidad_id":3,"unidad":{"id":3,"unidad_nombre":"KILO","unidad_descripcion":"Medici\u00f3n del producto por kilos."}}},{"id":38,"sc_cantidad":"6","sc_solicitud_id":10,"sc_catalogo_id":40,"catalogo":{"id":40,"catalogo_material":"MATERIAL-2287","catalogo_descripcion":"DESCRIPCI\u00d3N-1778","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}},{"id":39,"sc_cantidad":"2","sc_solicitud_id":10,"sc_catalogo_id":121,"catalogo":{"id":121,"catalogo_material":"MATERIAL-3179","catalogo_descripcion":"DESCRIPCI\u00d3N-2886","catalogo_unidad_id":1,"unidad":{"id":1,"unidad_nombre":"UNIDAD","unidad_descripcion":"Medici\u00f3n del producto por unidades."}}}],"solicitud":{"solicitud_codigo":"SO-2366072709","solicitud_nombre":"MATERIALES PARA LA CONSTRUCCI\u00d3N","solicitud_descripcion":"DESCRIPCI\u00d3N","solicitud_nombre_solicitante":"JEFE DE PROYECTO","solicitud_estado_id":1,"solicitud_detalle_solicitud_id":7,"solicitud_tipo_solicitud_id":1,"id":10},"fecha":"2021-01-17-21-13-45"}}';
    $data = json_decode($data, true);

    return $data;
});

Route::group([
    'middleware' => 'api',
    'prefix' => 'auth'
], function ($router) {
    Route::post('login', [AuthControllertroller::class, 'login']);
    Route::post('logout', [AuthController::class, 'logout']);
    Route::post('refresh', [AuthController::class, 'refresh']);
    Route::post('me', [AuthController::class, 'me']);
    Route::get('centro-costo', [AuthController::class, 'show']);
});
